script(type='text/javascript')
  $(function(){

    // Dialog
    $('#dialog').dialog({
      autoOpen: false,
      width: 400,
      height: 300,
      minWidth: 350,
      minHeight: 200
    });

    // Dialog Link
    $('#dialog_link').click(function(){
      $('#dialog').dialog('open');
      return false;
    });

    //hover states on the static widgets
    $('#dialog_link, ul#icons li').hover(
      function() { $(this).addClass('ui-state-hover'); }, 
      function() { $(this).removeClass('ui-state-hover'); }
    );
  });

style
  #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
  #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}

p
  a(href='#', id='dialog_link', class='ui-state-default ui-corner-all')
    span(class='ui-icon ui-icon-newwin')
    | Chat with us

#dialog(title='Have a chat')
  &nbsp;
  #messages
  div(style="position: absolute; top: 0;")
    input(type="text", id="text-input")
    button(type="submit", value="Send", id="send-button", class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only', style='padding: 0.4em 1em 0.4em 20px; margin: 0.4em') Send
  
script(type='text/javascript')
  $(document).ready(function(){
    now.name = prompt("What's your name?", "");  
    now.receiveMessage = function(name, message){
      $("#messages").append("<br>" + name + ": " + message);
    }
    $("#send-button").click(function(){
      now.distributeMessage($("#text-input").val());
      $("#text-input").val("");
      $("#text-input").focus();
    });
  });
